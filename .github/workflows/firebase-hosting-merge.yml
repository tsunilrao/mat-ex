# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on merge
'on':
  push:
    branches:
      - master
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - run: |
          cd project/mat-ex
          npm version patch
          git config https://$(GITHUB_TOKEN)@github.com/tsunilrao/mat-ex.git
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      # - run: npm ci && npm run build -- --prod

      # - uses: FirebaseExtended/action-hosting-deploy@v0
      #   with:
      #     repoToken: '${{ secrets.GITHUB_TOKEN }}'
      #     firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_MAT_EX }}'
      #     channelId: live
      #     projectId: mat-ex
      #   env:
      #     FIREBASE_CLI_PREVIEWS: hostingchannels

      # - run: npm run build -- --prod --base-href "https://tsunilrao.github.io/mat-ex/"
      # - run: cp dist/mat-ex-app/index.html dist/mat-ex-app/404.html

      # - uses: JamesIves/github-pages-deploy-action@4.0.0
      #   with:
      #     GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      #     branch: gh-pages
      #     folder: dist/mat-ex-app

      # - run: npm run build mat-ex -- --prod

      # - uses:  'phips28/gh-action-bump-version@master'
      #   env:
      #     GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      # - run: npm config set '//registry.npmjs.org/:_authToken' "${NPM_TOKEN}" && npm publish dist/mat-ex
      #   env: 
      #     NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
